<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="Spine-Leaf GPU Cluster" id="spine-leaf-v1">
    <mxGraphModel dx="1800" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=22;fontStyle=1" value="Spine-Leaf GPU Cluster Topology&lt;br&gt;&lt;font style=&quot;font-size:12px;font-weight:normal&quot;&gt;4x Nexus 9332PQ | 4x V100 GPUs | RoCEv2 RDMA | 160 Gbps Bisection&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="600" x="660" y="10" as="geometry" />
        </mxCell>

        <!-- SPINE LAYER BOX -->
        <mxCell id="spine-layer-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;dashed=1;opacity=40;" value="" vertex="1">
          <mxGeometry height="120" width="900" x="510" y="80" as="geometry" />
        </mxCell>
        <mxCell id="spine-layer-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=11;fontColor=#7F6000;fontStyle=1" value="SPINE LAYER (40G Fabric Core)" vertex="1">
          <mxGeometry height="20" width="200" x="860" y="85" as="geometry" />
        </mxCell>

        <!-- SPINE 1 -->
        <mxCell id="spine1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=10;" value="&lt;b&gt;SPINE-1&lt;/b&gt;&lt;br&gt;N9K-C9332PQ&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;32x 40G QSFP+&lt;/font&gt;" vertex="1">
          <mxGeometry height="70" width="160" x="600" y="110" as="geometry" />
        </mxCell>

        <!-- SPINE 2 -->
        <mxCell id="spine2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=10;" value="&lt;b&gt;SPINE-2&lt;/b&gt;&lt;br&gt;N9K-C9332PQ&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;32x 40G QSFP+&lt;/font&gt;" vertex="1">
          <mxGeometry height="70" width="160" x="1160" y="110" as="geometry" />
        </mxCell>

        <!-- Inter-Spine label -->
        <mxCell id="inter-spine-line" edge="1" parent="1" source="spine1" target="spine2" style="edgeStyle=none;rounded=0;html=1;strokeColor=#d6b656;strokeWidth=2;dashed=1;dashPattern=5 5;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="inter-spine-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=8;fontColor=#7F6000;" value="Optional vPC/MLAG" vertex="1">
          <mxGeometry height="15" width="100" x="910" y="130" as="geometry" />
        </mxCell>

        <!-- LEAF LAYER BOX -->
        <mxCell id="leaf-layer-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;opacity=40;" value="" vertex="1">
          <mxGeometry height="120" width="1400" x="260" y="250" as="geometry" />
        </mxCell>
        <mxCell id="leaf-layer-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=11;fontColor=#2d5016;fontStyle=1" value="LEAF LAYER (40G Access)" vertex="1">
          <mxGeometry height="20" width="180" x="870" y="255" as="geometry" />
        </mxCell>

        <!-- LEAF 1 -->
        <mxCell id="leaf1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;fontSize=10;" value="&lt;b&gt;LEAF-1&lt;/b&gt;&lt;br&gt;N9K-C9332PQ&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;32x 40G | PFC+ECN&lt;/font&gt;" vertex="1">
          <mxGeometry height="70" width="180" x="350" y="290" as="geometry" />
        </mxCell>

        <!-- LEAF 2 -->
        <mxCell id="leaf2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;fontSize=10;" value="&lt;b&gt;LEAF-2&lt;/b&gt;&lt;br&gt;N9K-C9332PQ&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;32x 40G | PFC+ECN&lt;/font&gt;" vertex="1">
          <mxGeometry height="70" width="180" x="1390" y="290" as="geometry" />
        </mxCell>

        <!-- SPINE TO LEAF CONNECTIONS -->
        <!-- Spine1 to Leaf1 -->
        <mxCell id="s1-l1-1" edge="1" parent="1" source="spine1" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="640" y="220"/><mxPoint x="400" y="220"/></Array></mxGeometry>
        </mxCell>
        <mxCell id="s1-l1-2" edge="1" parent="1" source="spine1" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="720" y="230"/><mxPoint x="480" y="230"/></Array></mxGeometry>
        </mxCell>

        <!-- Spine1 to Leaf2 -->
        <mxCell id="s1-l2-1" edge="1" parent="1" source="spine1" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="680" y="210"/><mxPoint x="1440" y="210"/></Array></mxGeometry>
        </mxCell>
        <mxCell id="s1-l2-2" edge="1" parent="1" source="spine1" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="700" y="200"/><mxPoint x="1520" y="200"/></Array></mxGeometry>
        </mxCell>

        <!-- Spine2 to Leaf1 -->
        <mxCell id="s2-l1-1" edge="1" parent="1" source="spine2" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1200" y="210"/><mxPoint x="420" y="210"/></Array></mxGeometry>
        </mxCell>
        <mxCell id="s2-l1-2" edge="1" parent="1" source="spine2" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1220" y="200"/><mxPoint x="460" y="200"/></Array></mxGeometry>
        </mxCell>

        <!-- Spine2 to Leaf2 -->
        <mxCell id="s2-l2-1" edge="1" parent="1" source="spine2" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1280" y="220"/><mxPoint x="1460" y="220"/></Array></mxGeometry>
        </mxCell>
        <mxCell id="s2-l2-2" edge="1" parent="1" source="spine2" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1300" y="230"/><mxPoint x="1500" y="230"/></Array></mxGeometry>
        </mxCell>

        <!-- Uplink Label -->
        <mxCell id="uplink-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=8;fontColor=#2d5016;fontStyle=1" value="4x 40G Uplinks per Leaf&lt;br&gt;(160 Gbps to Spine)" vertex="1">
          <mxGeometry height="25" width="120" x="900" y="215" as="geometry" />
        </mxCell>

        <!-- GPU SERVER 1 BOX -->
        <mxCell id="gpu1-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;opacity=50;" value="" vertex="1">
          <mxGeometry height="280" width="280" x="160" y="420" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=12;fontColor=#990000;fontStyle=1" value="&lt;b&gt;GPU SERVER 1&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;192.168.1.73 | IPMI: 192.168.1.72&lt;/font&gt;" vertex="1">
          <mxGeometry height="35" width="180" x="210" y="425" as="geometry" />
        </mxCell>

        <!-- GPU1 V100s -->
        <mxCell id="gpu1-v100-0" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#76b900;strokeColor=#5a8c00;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;NVIDIA V100&lt;/b&gt;&lt;br&gt;32GB HBM2&lt;br&gt;&lt;b&gt;GPU 0&lt;/b&gt;" vertex="1">
          <mxGeometry height="55" width="100" x="180" y="470" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-v100-1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#76b900;strokeColor=#5a8c00;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;NVIDIA V100&lt;/b&gt;&lt;br&gt;32GB HBM2&lt;br&gt;&lt;b&gt;GPU 1&lt;/b&gt;" vertex="1">
          <mxGeometry height="55" width="100" x="310" y="470" as="geometry" />
        </mxCell>

        <!-- GPU1 CX3 Pro -->
        <mxCell id="gpu1-nic" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=8;" value="&lt;b&gt;ConnectX-3 Pro (Dual-Port)&lt;/b&gt;&lt;br&gt;mlx4_0 | 2x 40GbE QSFP+" vertex="1">
          <mxGeometry height="35" width="200" x="200" y="540" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-port0" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;Port 0&lt;/b&gt;&lt;br&gt;40G→Leaf1&lt;br&gt;10.0.0.1" vertex="1">
          <mxGeometry height="40" width="70" x="210" y="585" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-port1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;Port 1&lt;/b&gt;&lt;br&gt;40G→Leaf1&lt;br&gt;10.0.1.1" vertex="1">
          <mxGeometry height="40" width="70" x="320" y="585" as="geometry" />
        </mxCell>

        <!-- GPU1 1G + IPMI -->
        <mxCell id="gpu1-mgmt" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="&lt;b&gt;2x 1G Copper&lt;/b&gt;&lt;br&gt;eth0/eth1" vertex="1">
          <mxGeometry height="30" width="80" x="180" y="640" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-ipmi" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=7;" value="&lt;b&gt;IPMI&lt;/b&gt;&lt;br&gt;192.168.1.72" vertex="1">
          <mxGeometry height="30" width="80" x="280" y="640" as="geometry" />
        </mxCell>

        <!-- GPU SERVER 2 BOX -->
        <mxCell id="gpu2-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;opacity=50;" value="" vertex="1">
          <mxGeometry height="280" width="280" x="480" y="420" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=12;fontColor=#990000;fontStyle=1" value="&lt;b&gt;GPU SERVER 2&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;192.168.1.71 | IPMI: 192.168.1.70&lt;/font&gt;" vertex="1">
          <mxGeometry height="35" width="180" x="530" y="425" as="geometry" />
        </mxCell>

        <!-- GPU2 V100s -->
        <mxCell id="gpu2-v100-0" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#76b900;strokeColor=#5a8c00;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;NVIDIA V100&lt;/b&gt;&lt;br&gt;32GB HBM2&lt;br&gt;&lt;b&gt;GPU 0&lt;/b&gt;" vertex="1">
          <mxGeometry height="55" width="100" x="500" y="470" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-v100-1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#76b900;strokeColor=#5a8c00;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;NVIDIA V100&lt;/b&gt;&lt;br&gt;32GB HBM2&lt;br&gt;&lt;b&gt;GPU 1&lt;/b&gt;" vertex="1">
          <mxGeometry height="55" width="100" x="630" y="470" as="geometry" />
        </mxCell>

        <!-- GPU2 CX3 Pro -->
        <mxCell id="gpu2-nic" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=8;" value="&lt;b&gt;ConnectX-3 Pro (Dual-Port)&lt;/b&gt;&lt;br&gt;mlx4_0 | 2x 40GbE QSFP+" vertex="1">
          <mxGeometry height="35" width="200" x="520" y="540" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-port0" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;Port 0&lt;/b&gt;&lt;br&gt;40G→Leaf1&lt;br&gt;10.0.0.2" vertex="1">
          <mxGeometry height="40" width="70" x="530" y="585" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-port1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;Port 1&lt;/b&gt;&lt;br&gt;40G→Leaf1&lt;br&gt;10.0.1.2" vertex="1">
          <mxGeometry height="40" width="70" x="640" y="585" as="geometry" />
        </mxCell>

        <!-- GPU2 1G + IPMI -->
        <mxCell id="gpu2-mgmt" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="&lt;b&gt;2x 1G Copper&lt;/b&gt;&lt;br&gt;eth0/eth1" vertex="1">
          <mxGeometry height="30" width="80" x="500" y="640" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-ipmi" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=7;" value="&lt;b&gt;IPMI&lt;/b&gt;&lt;br&gt;192.168.1.70" vertex="1">
          <mxGeometry height="30" width="80" x="600" y="640" as="geometry" />
        </mxCell>

        <!-- GPU to Leaf1 connections -->
        <mxCell id="gpu1-leaf1" edge="1" parent="1" source="gpu1-port0" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#b85450;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-leaf1-2" edge="1" parent="1" source="gpu1-port1" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#b85450;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-leaf1" edge="1" parent="1" source="gpu2-port0" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#b85450;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-leaf1-2" edge="1" parent="1" source="gpu2-port1" target="leaf1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#b85450;strokeWidth=3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ESXi Host 1 BOX -->
        <mxCell id="esxi1-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;opacity=50;" value="" vertex="1">
          <mxGeometry height="260" width="240" x="1200" y="420" as="geometry" />
        </mxCell>
        <mxCell id="esxi1-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=11;fontColor=#1a3d5c;fontStyle=1" value="&lt;b&gt;ESXi Host 1&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;192.168.50.152&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="120" x="1260" y="425" as="geometry" />
        </mxCell>

        <!-- ESXi1 NICs -->
        <mxCell id="esxi1-nic" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=8;" value="&lt;b&gt;ConnectX-4 Lx (Dual-Port)&lt;/b&gt;&lt;br&gt;SR-IOV Enabled" vertex="1">
          <mxGeometry height="30" width="180" x="1230" y="465" as="geometry" />
        </mxCell>
        <mxCell id="esxi1-vmnic3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;vmnic3&lt;/b&gt;&lt;br&gt;40G→Leaf2" vertex="1">
          <mxGeometry height="35" width="70" x="1240" y="505" as="geometry" />
        </mxCell>
        <mxCell id="esxi1-vmnic4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;vmnic4&lt;/b&gt;&lt;br&gt;40G→Leaf2" vertex="1">
          <mxGeometry height="35" width="70" x="1330" y="505" as="geometry" />
        </mxCell>

        <!-- ESXi1 VMs -->
        <mxCell id="vm1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma1&lt;br&gt;.152" vertex="1">
          <mxGeometry height="30" width="70" x="1220" y="555" as="geometry" />
        </mxCell>
        <mxCell id="vm2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma2&lt;br&gt;.153" vertex="1">
          <mxGeometry height="30" width="70" x="1300" y="555" as="geometry" />
        </mxCell>
        <mxCell id="vm3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma3&lt;br&gt;.154" vertex="1">
          <mxGeometry height="30" width="70" x="1220" y="595" as="geometry" />
        </mxCell>
        <mxCell id="vm4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma4&lt;br&gt;.155" vertex="1">
          <mxGeometry height="30" width="70" x="1300" y="595" as="geometry" />
        </mxCell>
        <mxCell id="esxi1-vm-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=7;fontColor=#6c8ebf;" value="Lenovo P920 | SR-IOV VMs" vertex="1">
          <mxGeometry height="15" width="140" x="1250" y="635" as="geometry" />
        </mxCell>

        <!-- ESXi Host 2 BOX -->
        <mxCell id="esxi2-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;opacity=50;" value="" vertex="1">
          <mxGeometry height="260" width="240" x="1480" y="420" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=11;fontColor=#1a3d5c;fontStyle=1" value="&lt;b&gt;ESXi Host 2&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;192.168.50.32&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="120" x="1540" y="425" as="geometry" />
        </mxCell>

        <!-- ESXi2 NICs -->
        <mxCell id="esxi2-nic" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=8;" value="&lt;b&gt;ConnectX-4 Lx (Dual-Port)&lt;/b&gt;&lt;br&gt;SR-IOV Enabled" vertex="1">
          <mxGeometry height="30" width="180" x="1510" y="465" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-vmnic5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;vmnic5&lt;/b&gt;&lt;br&gt;40G→Leaf2" vertex="1">
          <mxGeometry height="35" width="70" x="1520" y="505" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-vmnic6" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=7;" value="&lt;b&gt;vmnic6&lt;/b&gt;&lt;br&gt;40G→Leaf2" vertex="1">
          <mxGeometry height="35" width="70" x="1610" y="505" as="geometry" />
        </mxCell>

        <!-- ESXi2 VMs -->
        <mxCell id="vm5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma5&lt;br&gt;.107" vertex="1">
          <mxGeometry height="30" width="70" x="1500" y="555" as="geometry" />
        </mxCell>
        <mxCell id="vm6" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma6&lt;br&gt;.51" vertex="1">
          <mxGeometry height="30" width="70" x="1580" y="555" as="geometry" />
        </mxCell>
        <mxCell id="vm7" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma7&lt;br&gt;.150" vertex="1">
          <mxGeometry height="30" width="70" x="1500" y="595" as="geometry" />
        </mxCell>
        <mxCell id="vm8" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7;" value="ubunturdma8&lt;br&gt;.94" vertex="1">
          <mxGeometry height="30" width="70" x="1580" y="595" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-vm-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=7;fontColor=#6c8ebf;" value="Lenovo P920 | SR-IOV VMs" vertex="1">
          <mxGeometry height="15" width="140" x="1530" y="635" as="geometry" />
        </mxCell>

        <!-- ESXi to Leaf2 connections -->
        <mxCell id="esxi1-leaf2" edge="1" parent="1" source="esxi1-vmnic3" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=2;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="esxi1-leaf2-2" edge="1" parent="1" source="esxi1-vmnic4" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=2;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-leaf2" edge="1" parent="1" source="esxi2-vmnic5" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=2;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="esxi2-leaf2-2" edge="1" parent="1" source="esxi2-vmnic6" target="leaf2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=2;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- MANAGEMENT SWITCH -->
        <mxCell id="mgmt-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;opacity=50;" value="" vertex="1">
          <mxGeometry height="140" width="560" x="160" y="740" as="geometry" />
        </mxCell>
        <mxCell id="mgmt-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=11;fontColor=#333333;fontStyle=1" value="MANAGEMENT LAYER (1G Out-of-Band)" vertex="1">
          <mxGeometry height="20" width="240" x="320" y="745" as="geometry" />
        </mxCell>

        <mxCell id="3750x" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#000000;fontSize=10;" value="&lt;b&gt;Cisco WS-C3750X-24P-S&lt;/b&gt;&lt;br&gt;24x 1G PoE + C3KX-NM-10G (2x 10G)&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;Management + IPMI Network&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="240" x="320" y="775" as="geometry" />
        </mxCell>

        <!-- 3750X port labels -->
        <mxCell id="3750x-ports" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=7;" value="&lt;b&gt;Gi1/0/1-6:&lt;/b&gt; GPU Servers (Mgmt + IPMI)&lt;br&gt;&lt;b&gt;Gi1/0/7-8:&lt;/b&gt; ESXi Hosts&lt;br&gt;&lt;b&gt;Gi1/0/11-14:&lt;/b&gt; Switch OOB Mgmt&lt;br&gt;&lt;b&gt;Te1/0/1-2:&lt;/b&gt; Future (Storage/Monitor)" vertex="1">
          <mxGeometry height="50" width="200" x="180" y="820" as="geometry" />
        </mxCell>

        <!-- Mgmt connections (dashed) -->
        <mxCell id="gpu1-3750" edge="1" parent="1" source="gpu1-mgmt" target="3750x" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu1-ipmi-3750" edge="1" parent="1" source="gpu1-ipmi" target="3750x" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-3750" edge="1" parent="1" source="gpu2-mgmt" target="3750x" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpu2-ipmi-3750" edge="1" parent="1" source="gpu2-ipmi" target="3750x" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=none;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Traffic Flow Box -->
        <mxCell id="flow-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#76b900;strokeColor=#5a8c00;opacity=90;" value="" vertex="1">
          <mxGeometry height="180" width="320" x="800" y="420" as="geometry" />
        </mxCell>
        <mxCell id="flow-info" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;Traffic Flows&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;GPU1 ↔ GPU2 (Same Leaf):&lt;/b&gt;&lt;br&gt;Path: GPU → Leaf-1 → GPU&lt;br&gt;Latency: ~1-2 µs (1 hop)&lt;br&gt;&lt;br&gt;&lt;b&gt;GPU ↔ VM (Cross-Leaf):&lt;/b&gt;&lt;br&gt;Path: Leaf-1 → Spine → Leaf-2&lt;br&gt;Latency: ~3-5 µs (3 hops)&lt;br&gt;Bandwidth: 4x40G ECMP = 160 Gbps&lt;br&gt;&lt;br&gt;&lt;b&gt;Multi-Rail:&lt;/b&gt; Each GPU has dedicated 40G" vertex="1">
          <mxGeometry height="160" width="300" x="810" y="430" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" value="" vertex="1">
          <mxGeometry height="160" width="180" x="800" y="620" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontStyle=1" value="&lt;b&gt;Legend&lt;/b&gt;" vertex="1">
          <mxGeometry height="15" width="60" x="860" y="625" as="geometry" />
        </mxCell>
        <mxCell id="legend-spine" parent="1" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=left;fontSize=8;spacingLeft=3;" value="Spine Switch (40G)" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="645" as="geometry" />
        </mxCell>
        <mxCell id="legend-leaf" parent="1" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;fontSize=8;spacingLeft=3;" value="Leaf Switch (40G)" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="662" as="geometry" />
        </mxCell>
        <mxCell id="legend-gpu" parent="1" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=left;fontSize=8;spacingLeft=3;" value="GPU Server" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="679" as="geometry" />
        </mxCell>
        <mxCell id="legend-esxi" parent="1" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;fontSize=8;spacingLeft=3;" value="ESXi / VM" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="696" as="geometry" />
        </mxCell>
        <mxCell id="legend-nvidia" parent="1" style="text;html=1;strokeColor=none;fillColor=#76b900;align=left;fontSize=8;spacingLeft=3;fontColor=#ffffff;" value="NVIDIA V100" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="713" as="geometry" />
        </mxCell>
        <mxCell id="legend-mgmt" parent="1" style="text;html=1;strokeColor=none;fillColor=#f5f5f5;align=left;fontSize=8;spacingLeft=3;" value="Management (1G)" vertex="1">
          <mxGeometry height="14" width="100" x="810" y="730" as="geometry" />
        </mxCell>
        <mxCell id="legend-lines" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=7;" value="&lt;font color=&quot;#82b366&quot;&gt;━━&lt;/font&gt; 40G Spine-Leaf&lt;br&gt;&lt;font color=&quot;#b85450&quot;&gt;━━&lt;/font&gt; 40G GPU Link&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;┅┅&lt;/font&gt; 1G Management" vertex="1">
          <mxGeometry height="40" width="100" x="810" y="750" as="geometry" />
        </mxCell>

        <!-- Summary Box -->
        <mxCell id="summary-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1a1a2e;strokeColor=#4a90d9;opacity=95;" value="" vertex="1">
          <mxGeometry height="160" width="240" x="1000" y="620" as="geometry" />
        </mxCell>
        <mxCell id="summary-info" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9;fontColor=#ffffff;" value="&lt;b&gt;Cluster Summary&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;Switches:&lt;/b&gt; 4x Nexus 9332PQ + 1x 3750X&lt;br&gt;&lt;b&gt;GPUs:&lt;/b&gt; 4x NVIDIA V100 (128GB HBM2)&lt;br&gt;&lt;b&gt;RDMA NICs:&lt;/b&gt; 6x Mellanox CX3/CX4&lt;br&gt;&lt;b&gt;VMs:&lt;/b&gt; 8x Ubuntu RDMA (SR-IOV)&lt;br&gt;&lt;b&gt;Fabric BW:&lt;/b&gt; 160 Gbps bisection&lt;br&gt;&lt;b&gt;Redundancy:&lt;/b&gt; 2 spines, 4 uplinks/leaf&lt;br&gt;&lt;b&gt;QoS:&lt;/b&gt; PFC + ECN + DCQCN" vertex="1">
          <mxGeometry height="150" width="220" x="1010" y="625" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
